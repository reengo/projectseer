{literal}
<script language="javascript">
function effectOnFocus(dom)
{
    dom.setStyle({color:'#000000'});
    if (dom.value == 'search ...') {
        dom.value = '';
    }
}

function effectOnBlur(dom)
{
    dom.setStyle({color:'#707070'});
    if (dom.value == '') {
        dom.value = 'search ...';
    }
}
</script>
{/literal}

{flash}
<table cellpadding="0" cellspacing="0" width="100%">
<tr>
    <td>
    {form method="get"}
    {form_text name="search" value="search ..." size="30" no_div=true onfocus="effectOnFocus(this)" onblur="effectOnBlur(this);" style="color:#707070"}
    {form_submit name="submitsearch" value="search" class="botton" no_div=true}
    {/form}
    </td>
    <td align="right">
    {form_button name="addrole" value="  add role  " class="botton" no_div=true location="/admin/roles/add"}
    </td>
</tr>
</table>


<table border="0" cellpadding="0" cellspacing="1">
<tr>
    <th width="20%">roles</th>
    <th width="30%">desription</th>
    <th width="20%">inherited from</th>
    <th width="15%">resources assigned</th>
    <th width="15%">actions</th>
</tr>
{foreach item=item from=$results}
{assign var="id" value=$item.id}
<tr id="role-{$item.id}" class="row-color{cycle values=1,2}">
    <td>{$item.name}</td>
    <td>{$item.description|capitalize|default:'-'}</td>
    {if $item.name eq "admin"}
        <td>-</td>
        <td>-- UNLIMITED ACCESS --</td>
        <td>{link_to action="view" id=$item.id}view{/link_to}</td>
    {else}
        <td>{display_roleinherited parents=$item.inherited_from}</td>
        <td>{link_to href="/admin/roles/view-add-resource/id/$id"}view/add resources{/link_to}</td>
        <td>
        {link_to action="view" id=$item.id}view{/link_to} |
        {link_to action="edit" id=$item.id}edit{/link_to} |
        {link_to action="delete" id=$item.id confirm="Are you sure you want to delete this role?"}delete{/link_to}
        </td>
    {/if}
</tr>
{foreachelse}
<tr class="row-color2">
    <td colspan="5" align="center">No Roles were found.</td>
</tr>
{/foreach}
</table>

{if $paginate.page_total > 1}
<div class="list-control">
    <br>
	<p>Page {paginate_prev} {paginate_middle format="page" link_suffix=" | " prefix="" suffix=""} {paginate_next}</p>
</div>
{/if}

